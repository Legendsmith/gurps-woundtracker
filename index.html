<!DOCTYPE html>
<html>
<head>
  <title>GURPS Accumulative Wound Tracker v1</title>
  <style>
  .left{float:left; width:33%;}
  .insm{width:40px;}
</style>

</head>
<body style="font-family:sans-serif;">
<div id="main" style="width:600px;margin-left:auto; margin-right:auto;background-color:Wheat;border-radius:20px;padding:20px"><h1><span class="he">G</span><span class="he">U</span><span class="he">R</span><span class="he">P</span><span class="he">S</span> Wound Tracker</h1>
<p> <span class="he">G</span><span class="he">U</span><span class="he">R</span><span class="he">P</span><span class="he">S</span> Basic Set has rules for Accumulated Wounds to limbs on page 420. It mentions that this is more realistic, but causes more record keeping. This simple page is designed to make such record keeping easy.</p>
<p>To use: Enter your character's Max HP and press Initialise to begin. Enter damage values and press update to "damage" limbs, this will also automatically carry the appropriate damage across to the body's "core" where appropriate. Healing is completely per-part though, so healing an arm will not affect the core HP, you must enter healing completely individually. Pressing Initialise again will also reset the form to full HP.</p>
<span>Saving and loading are enabled if you allow cookies. To load, you must enter the max HP again and then Initialise before pressing load.</span></br>
<input class=insm type="number" id="maxhp"></input> Max HP</br>
<button id="btn_init">Initialise</button>  <button id="btn_save">Save</button> <button id="btn_load">Load</button>
</br>
<h3>Core HP Including Head, Neck, Torso</h3>
Injury/Heal: <input type="number" class=insm id="in_to" value=0 min=0  autocomplete='off'></input> || HP <span id="txt_to">__</span> Total HP </br>
<h3>Limbs and Extremeties</h3>
Injury/Heal: <input type="number" class=insm id="in_ey" value=0 min=0  autocomplete='off'></input> || <span id="txt_ey">_/_</span> Eye </br>
Injury/Heal: <input type="number" class=insm id="in_ra" value=0 min=0  autocomplete='off'></input> || <span id="txt_ra">_/_</span> Right Arm</br>
Injury/Heal: <input type="number" class=insm id="in_la" value=0 min=0  autocomplete='off'></input> || <span id="txt_la">_/_</span> Left Arm</br>
Injury/Heal: <input type="number" class=insm id="in_rh" value=0 min=0  autocomplete='off'></input> || <span id="txt_rh">_/_</span> Right Hand</br>
Injury/Heal: <input type="number" class=insm id="in_lh" value=0 min=0  autocomplete='off'></input> || <span id="txt_lh">_/_</span> Left Hand</br>
Injury/Heal: <input type="number" class=insm id="in_rl" value=0 min=0  autocomplete='off'></input> || <span id="txt_rl">_/_</span> Right Leg</br>
Injury/Heal: <input type="number" class=insm id="in_ll" value=0 min=0  autocomplete='off'></input> || <span id="txt_ll">_/_</span> Left Leg</br>
Injury/Heal: <input type="number" class=insm id="in_rf" value=0 min=0  autocomplete='off'></input> || <span id="txt_rf">_/_</span> Right Foot</br>
Injury/Heal: <input type="number" class=insm id="in_lf" value=0 min=0  autocomplete='off'></input> || <span id="txt_lf">_/_</span> Left Foot</br>
<button id="btn_updt">Update</button> Damage:<input type="radio" name="group_hd" value="damage" checked id="rb_d"> Heal:<input type="radio" name="group_hd" value="heal">
<script>
document.onclick=function(){
	function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	}
	var helements = document.querySelectorAll(".he")
	for (var i = 0; i < helements.length; i++) {
    helements[i].style.color = getRandomColor()
}

}


btn_updt.disabled = true
btn_save.disabled = true
btn_load.disabled = true
var ey = {
    "mod": 10,
    "hhash": "ey"
};
var ra = {
    "mod": 2,
    "hhash": "ra"
};
var la = {
    "mod": 2,
    "hhash": "la"
};
var rh = {
    "mod": 3,
    "hhash": "rh"
};
var lh = {
    "mod": 3,
    "hhash": "lh"
};
var rl = {
    "mod": 2,
    "hhash": "rl"
};
var ll = {
    "mod": 2,
    "hhash": "ll"
};
var rf = {
    "mod": 3,
    "hhash": "rf"
};
var lf = {
    "mod": 3,
    "hhash": "lf"
};
fullhp = 1
var parts = [ey, ra, la, rh, lh, rl, ll, rf, lf]


btn_save.onclick=function save(){
	document.cookie = ey.hp+ "|" +ra.hp+ "|" +la.hp+ "|" +rh.hp+ "|" +lh.hp+ "|" +rl.hp+ "|" +ll.hp+ "|" +rf.hp+ "|" +lf.hp+"|"+fullhp+"|\0"
}

btn_load.onclick=function load(){
	var ar =document.cookie.split('|');
	for (i = 0; i < parts.length; i++) {
        parts[i].hp = ar[i]
        var textfield = "txt_" + parts[i].hhash

        if (parts[i].hp <= -(parts[i].max+1) * 2) {
                document.getElementById("txt_" + parts[i].hhash).innerHTML = "<span style=\"color:Purple\">HP: "+parts[i].hp + "/" + parts[i].max + " <b>DESTROYED/DISMEMBERED</b></span>"
            } else if (parts[i].hp < 0) {
                document.getElementById(textfield).innerHTML = "<span style=\"color:red\">HP: "+parts[i].hp + "/" + parts[i].max + " CRIPPLED </span>"
            } else {
                document.getElementById(textfield).innerHTML = "<span style=\"color:green\">HP: "+parts[i].hp + "/" + parts[i].max+ "</span>"
            }
    }
    fullhp = parseInt(ar[9])
    document.getElementById("txt_to").innerHTML = fullhp + "/" + maxhp.value;

}

btn_init.onclick = function init() {
    //var parts = [ey, ra, la, rh, lh, rl, ll, rf, lf];
    fullhp = maxhp.value
    document.getElementById("txt_to").innerHTML = maxhp.value + "/" + maxhp.value;
    for (i = 0; i < parts.length; i++) {
        var textfield = "txt_" + parts[i].hhash
        parts[i].max = Math.floor(maxhp.value / parts[i].mod);
        parts[i].hp = Math.floor(maxhp.value / parts[i].mod);
        document.getElementById(textfield).innerHTML = parts[i].hp + "/" + parts[i].max;
if (parts[i].hp <= -(parts[i].max+1) * 2) {
                document.getElementById("txt_" + parts[i].hhash).innerHTML = "<span style=\"color:Purple\">HP: "+parts[i].hp + "/" + parts[i].max + " <b>DESTROYED/DISMEMBERED</b></span>"
            } else if (parts[i].hp < 0) {
                document.getElementById(textfield).innerHTML = "<span style=\"color:red\">HP: "+parts[i].hp + "/" + parts[i].max + " CRIPPLED </span>"
            } else {
                document.getElementById(textfield).innerHTML = "<span style=\"color:green\">HP: "+parts[i].hp + "/" + parts[i].max+ "</span>"
            }
    }
    btn_updt.disabled = false
    btn_save.disabled = false
	btn_load.disabled = false
}


btn_updt.onclick = function update() {
    //var parts = [ey, ra, la, rh, lh, rl, ll, rf, lf];

    if (document.getElementById("rb_d").checked) { //damage--------------------
        fullhp -= in_to.value
        for (i = 0; i < parts.length; i++) {
            var textfield = "txt_" + parts[i].hhash
            var _input = parseInt(document.getElementById("in_" + parts[i].hhash).value); //get the damage dealt


            if (_input > parts[i].hp && parts[i].hp > 0) {
                fullhp -= parts[i].hp
                parts[i].hp -= _input
            } else if (parts[i].hp <= 0) {
                parts[i].hp -= _input
            } else {
                fullhp -= _input;
                parts[i].hp -= _input;
            }

            /*if(parts[i].hp >= 0){
            document.getElementById(textfield).innerHTML = parts[i].hp+"/"+parts[i].max;
            	if(_input>parts[i].max){
            		fullhp -= parts[i].max+1
            	}else{fullhp -=_input}}else*/
            if (parts[i].hp <= -(parts[i].max+1) * 2) {
                document.getElementById("txt_" + parts[i].hhash).innerHTML = "<span style=\"color:Purple\">HP: "+parts[i].hp + "/" + parts[i].max + " <b>DESTROYED/DISMEMBERED</b></span>"
            } else if (parts[i].hp < 0) {
                document.getElementById(textfield).innerHTML = "<span style=\"color:red\">HP: "+parts[i].hp + "/" + parts[i].max + " CRIPPLED </span>"
            } else {
                document.getElementById(textfield).innerHTML = "<span style=\"color:green\">HP: "+parts[i].hp + "/" + parts[i].max+ "</span>"
            }
        }
    } else { //healing----------------
        fullhp += parseInt(in_to.value)
        for (i = 0; i < parts.length; i++) {
            var textfield = "txt_" + parts[i].hhash
            var _input = parseInt(document.getElementById("in_" + parts[i].hhash).value); //get the heal amount

            parts[i].hp += _input
            if (parts[i].hp > parts[i].max){parts[i].hp=parts[i].max};

            if (parts[i].hp <= -(parts[i].max+1) * 2) {
                document.getElementById("txt_" + parts[i].hhash).innerHTML = "<span style=\"color:Purple\">HP: "+parts[i].hp + "/" + parts[i].max + " <b>DESTROYED/DISMEMBERED</b></span>"
            } else if (parts[i].hp < 0) {
                document.getElementById(textfield).innerHTML = "<span style=\"color:red\">HP: "+parts[i].hp + "/" + parts[i].max + " CRIPPLED </span>"
            } else {
                document.getElementById(textfield).innerHTML = "<span style=\"color:green\">HP: "+parts[i].hp + "/" + parts[i].max+ "</span>"
            }
        }
    }


    

    if (fullhp > maxhp.value) {
        fullhp = maxhp.value
    }
    document.getElementById("txt_to").innerHTML = fullhp + "/" + maxhp.value;
}
</script><p>Wound Tracker made by <a href="mailto:legendsmith.au@gmail.com">Legendsmith</a>. The material presented here is my original creation, intended for use with the <a href="http://www.sjgames.com/gurps/"><b><i><span class="he">G</span><span class="he">U</span><span class="he">R</span><span class="he">P</span><span class="he">S</span></i></b></a> system from <a href="http://www.sjgames.com/">Steve Jackson Games</a>. This material is not official and is not endorsed by Steve Jackson Games.</p></div>

</body>
</html> 
